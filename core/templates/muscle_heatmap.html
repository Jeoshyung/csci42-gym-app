{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container mt-4">
    <h2 class="text-center">Muscle Heat Map</h2>
    <div class="muscle-heatmap-container">
        <!-- Load the SVG as an external file -->
        <object type="image/svg+xml" data="{% static 'images/muscle_map.svg' %}" id="muscle-map" class="w-100"></object>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const exercisedMuscles = JSON.parse('{{ exercised_muscles|safe|escapejs }}');

        // If SVG is loaded as an external file
        const svgObject = document.getElementById('muscle-map');
        if (svgObject && svgObject.contentDocument) {
            const svgDoc = svgObject.contentDocument;
            exercisedMuscles.forEach(muscleId => {
                const muscleElement = svgDoc.getElementById(muscleId);
                if (muscleElement) {
                    muscleElement.style.fill = '#4caf50'; // Highlight exercised muscles
                }
            });
        }
    });
</script>
{% endblock %}